{% extends "base.html" %}

{% block content %}

	<div class="row d-flex justify-content-center">			
		<h1>Hello {{user.username}} </h1>
	</div>
	<br>
	<div class="row d-flex justify-content-center">			
		<h2> Your schedules <h2>
	</div>
<p>
	{% set ns = namespace(current_date=e[0]) %}

	<div class="row d-flex justify-content-center">			
		<table class="table", style="width:90%">
			<thead class="thead-dark">
				<tr>
					<th class="text-center", colspan="5">{{ns.current_date.event_date.date()}}</th>	
				</tr>
				<tr>		
					<th class="text-center", colspan="5">
						<a href="/vacancy/{{user.username}}/{{ns.current_date.id}}"><button class="btn btn-outline-light" type="submit">Find Vacancy</button></a>
					</th>
				</tr>
				<tr>
					<th class="text-center">Event</th>
					<th class="text-center">Date</th>
					<th class="text-center">Starting Time</th>
					<th class="text-center">Ending Time</th>
					<th class="text-center">Actions</th>
				</tr>
			</thead>
			
			{% for data in e %}
				{% if data.event_date.date() != ns.current_date.event_date.date() %}
					{% set ns.current_date = data %}
					</table>
					</div>

					<div class="row d-flex justify-content-center">			

						<table class="table", "row d-flex justify-content-center", style="width:90%">
							<thead class="thead-dark">
								<tr>
									<th class="text-center", colspan="5">{{ns.current_date.event_date.date()}}</th>	
								</tr>
								<tr>		
									<th class="text-center", colspan="5">
										<a href="/vacancy/{{user.username}}/{{ns.current_date.id}}"><button class="btn btn-outline-light" type="submit">Find Vacancy</button></a>
									</th>
								</tr>
								<tr>	
									<th class="text-center"> Event </th>
									<th class="text-center"> Date </th>
									<th class="text-center"> Starting Time </th>
									<th class="text-center"> Ending Time </th>
									<th class="text-center"> Actions </th>
								</tr>
							</thead>
					
				{% endif %}
				<tr>
					<td class="text-center">{{ data.event_name }}</td>
					<td class="text-center">{{ data.event_date.date() }}</td>
					<td class="text-center">{{ data.event_timeStart.time() }}</td>
					<td class="text-center">{{ data.event_timeEnd.time() }}</td>
					<td class="text-center">
						<a href="/delete/{{data.id}}"><button class="btn btn-outline-dark"type="submit">Delete</button></a>
						<a href="/edit/{{data.id}}"><button class="btn btn-outline-dark" type="submit">Edit</button></a>
					</td>
				</tr>
			{% endfor %}
		</table>
	</div>

</p>


{% endblock %}:
